use SDL2;
use Game;

class Test {
	function : Main(args : String[]) ~ Nil {
		game := GameEngine->New(640, 480, "Engine Test");
		if(game->IsOk()) {
			e := game->GetEvent();
			
			image := game->AddAnimatedImageSprite("../../../../programs/sdl/engine/tests/media/images/walk.png", 6);

			x := 0;
			y := 0;

			frame := 0;

			quit := false;
			while(<>quit) {
				game->FrameStart();

				while(e->Poll() <> 0) {
					if(e->GetType() = EventType->SDL_QUIT) {
						quit := true;
					};
				};

				game->Clear();
				image->Render(x, y, 0);
				x += 1;
				game->Show();

				

				# call once per second
				if(frame = game->GetFps()) {	
'.'->Print();				
					frame := 0;
				} 
				else {
					frame++;
				};

				game->FrameEnd();
			};
		};

		leaving {
			game->Quit();
		};
	}
}
