use System.IO.File;
use Collection;
use RegEx;
use Query;

class Rosetta {
	function : Main(args : String[]) ~ Nil {
##		Rex("a%l%e", "apple");
		
#~			
		root := "/Users/randy/Documents/Code/objeck-lang/core/release/";
		files := Directory->List(root);
		each(i : files) {
			pre := String->New(root);
			pre += files[i];
			Dir(pre);
		};
~#	
	
		table := MakeTable2();
		name := table->GetName();
		rows := table->Size();
		"table: name='{$name}', rows={$rows}"->PrintLine();
	
##		query := Query->New("from game where name=doom or system=wii", table);
##		query := Query->New("from game where name='wolfenstein 2' and (system=wii or date='10/27/17')", table);
##		query := Query->New("select date, system from game where name='wolfenstein 2' and (system=wii or date='10/27/17')", table);
		query := Query->New("select name from events where name like '%ball'", table);
		results := query->Query();
		"---"->PrintLine();
		
		results->ToString()->PrintLine();
	}
	
	function : Rex(pattern : String, input : String) ~ Nil {
		out := "";
		
		each(i : pattern) {
			c := pattern->Get(i);
			
			if(c = '%') {
				out += ".*";
			}
			else if(c = '_') {
				out += '.';
			}
			else {
				out += c;
			};
		};
		
		rex := RegEx->New(out);
		rex->Match(input)->PrintLine();
	}
	
	function : Dir(file : String) ~ Nil {
		short_name := "";
		index := file->FindLast('/');
		if(index > 0) {
			index += 1;
			short_name := file->SubString(index, file->Size() - index);
		}
		else {
			short_name := file;
		};
		
		owner := File->Owner(file);
		create := File->CreateTime(file);
		"*** short_name='{$short_name}', long_name='{$file}', owner='{$owner}', create='{$create}' ***"->PrintLine();
	}
	
	function : MakeTable2() ~ Table {
		t := Table->New("events", ["name", "date"]);
		
		r := t->Insert();
		r->Set("name", "volleyball");
		r->Set("date", System.Time.Date->New(27, 10, 2017, false));
		
		r := t->Insert();
		r->Set("name", "tennis");
		r->Set("date", System.Time.Date->New(5, 6, 1912, false));
		
		r := t->Insert();
		r->Set("name", "basketball");
		r->Set("date", System.Time.Date->New(1, 11, 1993, false));
		
		r := t->Insert();
		r->Set("name", "track");
		r->Set("date", System.Time.Date->New(15, 11, 2016, false));
	
		return t;	
	}
	
	function : MakeTable() ~ Table {
		t := Table->New("game", ["name", "system", "date"]);
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");

#~		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
		
		r := t->Insert();
		r->Set("name", "wolfenstein 2");
		r->Set("system", "pc");
		r->Set("date", "10/27/17");
		
		r := t->Insert();
		r->Set("name", "xenoblade");
		r->Set("system", "wii");
		r->Set("date", "5/6/12");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "pc");
		r->Set("date", "5/13/16");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "9/10/17");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "wii");
		r->Set("date", "1/1/18");
		
		r := t->Insert();
		r->Set("name", "doom");
		r->Set("system", "xbox");
		r->Set("date", "10/16/12");
~#
		
		return t;
	}
}