use Collection.Generic;

class Test {
    function : Main(args : String[]) ~ Nil {
        pairs := ParseUrlEncoding("fname=Jim+Jon&lname=James&Mary=a%20b");
        key_values := pairs->GetKeyValues()<Pair<String, String>>;
        each(i : key_values) {
            key_value := key_values->Get(i);
            key_value->GetFirst()->PrintLine();
            key_value->GetSecond()->PrintLine();
            "---"->PrintLine();
        };
    }

    function : ParseUrlEncoding(encoding : String) ~ Map<String, String> {
        decodings := Map->New()<String, String>;

        pairs :=  encoding->Split('&');
        if(pairs <> Nil) {
            each(i : pairs) {
                key_value := pairs[i]->Split('=');
                if(key_value <> Nil & key_value->Size() = 2) {
                    key := Web.HTTP.Url->Decode(key_value[0])->ReplaceAll('+', ' ');
                    value := Web.HTTP.Url->Decode(key_value[1])->ReplaceAll('+', ' ');
                    decodings->Insert(key, value);
                };
            };
        };

        return decodings;
    }
}