use Collection, Data.JSON, Data.JSON.Scheme;

class Test {
	function : Main(args : String[]) ~ Nil {
		# other stuff...
		contents_obj_json := JsonElement->New(JsonElement->JsonType->OBJECT);
		contents_obj_json->Insert("contents", JsonElement->New(JsonElement->JsonType->ARRAY));

		function_declaration_array_json := JsonElement->New(JsonElement->JsonType->ARRAY);
		
		# create function definition
		params := Set->New()<ParameterType>;
		params->Insert(ParameterType->New("year", ParameterType->Type->INTEGER, "year the team played"));
		func := FunctionType->New("get_coach_by_year", params, ["year"], "The name of the head coach for a given year");
		function_declaration_obj_array_json := JsonParser->TextToElement(func->ToString());
		function_declaration_array_json->Add(function_declaration_obj_array_json);
		
		# create array of functions
		function_declaration_obj_array_json := JsonElement->New(JsonElement->JsonType->OBJECT);
		function_declaration_obj_array_json->Insert("function_declarations", function_declaration_array_json);

		tools_array_json := JsonElement->New(JsonElement->JsonType->ARRAY);
		tools_array_json->Add(function_declaration_obj_array_json);

		# set tools
		contents_obj_json->Insert("tools", tools_array_json);

		contents_obj_json->ToString()->PrintLine();
	}
}