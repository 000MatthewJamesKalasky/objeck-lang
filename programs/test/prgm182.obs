class Test {
	function : Main(args : String[]) ~ Nil {
		input := "-3+2+-1";

		lhs := 0;
		oper := '\0';
		is_neg := false;

		each(i : input) {
			char := input->Get(i);
			next_char := '\0';
			if(i + 1 < input->Size()) {
				next_char := input->Get(i + 1);
			};

			if(char->IsDigit()) {
				rhs := (char - '0')->As(Int);
				
				select(oper) {
					label '+': {
						lhs += rhs;
					}

					label '-': {
						lhs -= rhs;
					}

					label '*': {
						lhs *= rhs;
					}

					label '/': {
						lhs /= rhs;
					}

					other  {
						lhs := is_neg ? -rhs : rhs;
					}
				};
				oper := '\0';
			}
			else {
				select(char) {
					label '+':
					label '-':
					label '*':
					label '/': {
						if((char = '-' & i = 0) | next_char = '-') {
							is_neg := true;
						}
						else {
							oper := char;
							is_neg := false;
						};
					}
				};
			};
		};

		lhs->PrintLine();
	}
}
